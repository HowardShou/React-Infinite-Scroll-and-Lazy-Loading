(this["webpackJsonpreact-int-observer"]=this["webpackJsonpreact-int-observer"]||[]).push([[0],{11:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),i=a.n(r),o=(a(4),a(2)),s=a(1);var l=function(){var e,t,a=Object(n.useReducer)((function(e,t){switch(t.type){case"ADVANCE_PAGE":return Object(s.a)({},e,{page:e.page+1});default:return e}}),{page:0}),r=Object(o.a)(a,2),i=r[0],l=r[1],u=Object(n.useReducer)((function(e,t){switch(t.type){case"STACK_IMAGES":return Object(s.a)({},e,{images:e.images.concat(t.images)});case"FETCHING_IMAGES":return Object(s.a)({},e,{fetching:t.fetching});default:return e}}),{images:[],fetching:!0}),m=Object(o.a)(u,2),f=m[0],d=m[1],g=Object(n.useRef)(null);return e=i,t=d,Object(n.useEffect)((function(){t({type:"FETCHING_IMAGES",fetching:!0}),fetch("https://picsum.photos/v2/list?page=".concat(e.page,"&limit=10")).then((function(e){return e.json()})).then((function(e){t({type:"STACK_IMAGES",images:e}),t({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){return t({type:"FETCHING_IMAGES",fetching:!1}),e}))}),[t,e.page]),function(e,t){var a=Object(n.useCallback)((function(e){var t=new IntersectionObserver((function(a){a.forEach((function(a){if(a.intersectionRatio>0){var n=a.target,c=n.dataset.src;c?n.src=c:console.error("Image source is invalid"),t.unobserve(e)}}))}));t.observe(e)}),[]),c=Object(n.useRef)(null);Object(n.useEffect)((function(){c.current=document.querySelectorAll(e),c.current&&c.current.forEach((function(e){return a(e)}))}),[a,c,e,t])}(".card-img-top",f.images),function(e,t){var a=Object(n.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&t({type:"ADVANCE_PAGE"})}))})).observe(e)}),[t]);Object(n.useEffect)((function(){e.current&&a(e.current)}),[a,e])}(g,l),c.a.createElement("div",{className:""},c.a.createElement("nav",{className:"navbar bg-light"},c.a.createElement("div",{className:"container"},c.a.createElement("a",{className:"navbar-brand",href:"/#"},c.a.createElement("h2",null,"Infinite scroll + image lazy loading")))),c.a.createElement("div",{id:"images",className:"container"},c.a.createElement("div",{className:"row"},f.images.map((function(e,t){var a=e.author,n=e.download_url;return c.a.createElement("div",{key:t,className:"card"},c.a.createElement("div",{className:"card-body "},c.a.createElement("img",{alt:a,"data-src":n,className:"card-img-top",src:"https://picsum.photos/id/870/300/300?grayscale&blur=2"})),c.a.createElement("div",{className:"card-footer"},c.a.createElement("p",{className:"card-text text-center text-capitalize text-primary"},"Shot by: ",a)))})))),f.fetching&&c.a.createElement("div",{className:"text-center bg-secondary m-auto p-3"},c.a.createElement("p",{className:"m-0 text-white"},"Getting images")),c.a.createElement("div",{id:"page-bottom-boundary",style:{border:"1px solid red"},ref:g}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(l,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},4:function(e,t,a){},6:function(e,t,a){e.exports=a(11)}},[[6,1,2]]]);
//# sourceMappingURL=main.12669cb8.chunk.js.map